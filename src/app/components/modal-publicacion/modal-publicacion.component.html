<!-- Contenedor principal del modal con un tamaño grande definido. -->
<div class="modal-dialog modal-lg">
  <!-- Tarjeta de Nebular que forma el cuerpo del modal, con fondo blanco. -->
  <nb-card class="modal-publicacion" style="background-color: #fff;">

    <!-- Cabecera de la tarjeta con el título del modal, internacionalizado. -->
    <nb-card-header>
      {{ 'components.modal-publicacion.labelCrearPublicacion' | translate }}
    </nb-card-header>

    <!-- Cuerpo de la tarjeta organizado en dos columnas para entrada de datos y previsualización. -->
    <nb-card-body class="row">

      <!-- Columna izquierda para la entrada de datos de la publicación. -->
      <div class="col-md-6">
        <div class="row">

          <!-- Selección de redes sociales con validación. -->
          <div class="col-md-12">
            <nb-select fullWidth class="mb-4"
              placeholder="{{'components.modal-publicacion.placeHolderSeleccionaRedSocial' | translate}}"
              [(ngModel)]="publicacion.redSocial" multiple>
              <nb-option *ngFor="let redSocial of redesSocialesDisponibles" [value]="redSocial.value">
                {{ redSocial.label }}
              </nb-option>
            </nb-select>
            <div *ngIf="submitted && publicacion.redSocial.length === 0" class="error-message mb-3">
              {{ 'components.modal-publicacion.validacionSeleccionaRedSocial' | translate }}
            </div>
          </div>

          <!-- Entrada para el título de la publicación con validación. -->
          <div class="col-md-12">
            <input fullWidth nbInput
              placeholder="{{'components.modal-publicacion.placeHolderTituloPublicacion' | translate }}"
              [(ngModel)]="publicacion.titulo" required class="form-control mb-4">
            <div *ngIf="submitted && !publicacion.titulo" class="error-message mb-3">
              {{ 'components.modal-publicacion.validacionTituloPublicacion' | translate }}
            </div>
          </div>

          <!-- Área de texto para la descripción de la publicación con validación. -->
          <div class="col-md-12">
            <textarea fieldSize="large" fullWidth nbInput
              placeholder="{{'components.modal-publicacion.placehoderDescripcionPublicacion' | translate }}"
              [(ngModel)]="publicacion.descripcion" required class="form-control mb-4"></textarea>
            <div *ngIf="submitted && !publicacion.descripcion" class="error-message mb-3">
              {{ 'components.modal-publicacion.validacionDescripcionPublicacion' | translate }}
            </div>
          </div>

          <!-- Componente de carga de archivos con previsualización de imagen. -->
          <div class="col-md-12">
            <ngx-file-drop (onFileDrop)="onFileDrop($event)" (click)="fileInput.click()">
              <ng-template ngx-file-drop-content-tmp>
                <div class="custom-content" [class.success]="isValidFile" [class.error]="!isValidFile && submitted">
                  {{ dropZoneMessage }}
                </div>
              </ng-template>
            </ngx-file-drop>
            <input type="file" #fileInput style="display: none;" (change)="onFileSelect($event)">
          </div>

        </div>
      </div>

      <!-- Columna derecha para previsualizar la publicación con título, descripción e imagen cargada. -->
      <div class="col-md-6">
        <p><strong>{{ 'components.modal-publicacion.labelPrevisualizacion' | translate }}</strong></p>
        <div class="previsualizacion-container mb-4">
          <img *ngIf="imagenPrevisualizacion" [src]="imagenPrevisualizacion" class="img-fluid img-previsualizacion"
            alt="{{'components.modal-publicacion.altPrevisualizacion' | translate}}">
          <div class="previsualizacion-info">
            <p><strong>{{publicacion.titulo}}</strong></p>
            <p>{{publicacion.descripcion}}</p>
            <div class="redes-sociales d-flex">
              <nb-icon class="col-md-2 filter-icons" style="margin-right: -8px;" *ngFor="let red of publicacion.redSocial" [icon]="getSocialMediaIcon(red)" pack="seekop"></nb-icon>
            </div>
          </div>
        </div>
      </div>
    </nb-card-body>

    <!-- Pie de la tarjeta con botones para diversas acciones relacionadas con la publicación. -->
    <nb-card-footer>
      <button nbButton status="info" (click)="definirAudiencia()" class="btn btn-info">
        {{ 'components.modal-publicacion.botonDefinirAudienciaObjetivo' | translate }}
      </button>
      <button nbButton status="primary" (click)="agregarPublicacion()" class="btn btn-primary">
        {{ 'components.modal-publicacion.botonPublicar' | translate }}
      </button>
      <button nbButton status="success" (click)="calendarizar()" class="btn btn-success">
        {{ 'components.modal-publicacion.botonCalendarizar' | translate }}
      </button>
      <button nbButton status="warning" (click)="cancelar()" class="btn btn-warning">
        {{ 'components.modal-publicacion.botonCancelar' | translate }}
      </button>
    </nb-card-footer>
  </nb-card>
</div>
